{"ast":null,"code":"var _createClass = require(\"/Users/nehaprakash/code/aem-guides-wknd-spa/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _classCallCheck = require(\"/Users/nehaprakash/code/aem-guides-wknd-spa/ui.frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\n!function (t, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e() : \"function\" == typeof define && define.amd ? define([], e) : \"object\" == typeof exports ? exports.cqSpaPageModelManager = e() : t.cqSpaPageModelManager = e();\n}(\"undefined\" != typeof self ? self : this, function () {\n  return function (t) {\n    var e = {};\n\n    function r(n) {\n      if (e[n]) return e[n].exports;\n      var i = e[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return t[n].call(i.exports, i, i.exports, r), i.l = !0, i.exports;\n    }\n\n    return r.m = t, r.c = e, r.d = function (t, e, n) {\n      r.o(t, e) || Object.defineProperty(t, e, {\n        enumerable: !0,\n        get: n\n      });\n    }, r.r = function (t) {\n      \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {\n        value: \"Module\"\n      }), Object.defineProperty(t, \"__esModule\", {\n        value: !0\n      });\n    }, r.t = function (t, e) {\n      if (1 & e && (t = r(t)), 8 & e) return t;\n      if (4 & e && \"object\" == typeof t && t && t.__esModule) return t;\n      var n = Object.create(null);\n      if (r.r(n), Object.defineProperty(n, \"default\", {\n        enumerable: !0,\n        value: t\n      }), 2 & e && \"string\" != typeof t) for (var i in t) {\n        r.d(n, i, function (e) {\n          return t[e];\n        }.bind(null, i));\n      }\n      return n;\n    }, r.n = function (t) {\n      var e = t && t.__esModule ? function () {\n        return t[\"default\"];\n      } : function () {\n        return t;\n      };\n      return r.d(e, \"a\", e), e;\n    }, r.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, r.p = \"\", r(r.s = 10);\n  }([function (t, e, r) {\n    \"use strict\";\n\n    r.d(e, \"a\", function () {\n      return d;\n    });\n    var n = r(8),\n        i = r(9),\n        o = r.n(i),\n        a = r(1);\n\n    var s = function s() {\n      _classCallCheck(this, s);\n    };\n\n    s.DEFAULT_SLING_MODEL_SELECTOR = \"model\", s.DEFAULT_MODEL_JSON_EXTENSION = \".model.json\";\n    var l = s,\n        c = r(3);\n    var h = /(?:\\/)(?:content|apps|libs|etc|etc.clientlibs|conf|mnt\\/overlay)(?:\\/)/,\n        u = \"(.+)/\" + a.a.JCR_CONTENT + \"/(.+)\";\n\n    var d = /*#__PURE__*/function () {\n      function d() {\n        _classCallCheck(this, d);\n      }\n\n      _createClass(d, null, [{\n        key: \"isBrowser\",\n        value: function isBrowser() {\n          try {\n            return \"undefined\" != typeof window;\n          } catch (t) {\n            return !1;\n          }\n        }\n      }, {\n        key: \"getContextPath\",\n        value: function getContextPath(t) {\n          var e = t || this.getCurrentPathname();\n          if (!e) return \"\";\n          var r = e.match(h),\n              n = null === r ? -1 : r.index || -1;\n          return n > 0 ? e.slice(0, n) : \"\";\n        }\n      }, {\n        key: \"adaptPagePath\",\n        value: function adaptPagePath(t, e) {\n          if (!t) return \"\";\n          if (!e) return t;\n          var r = d.internalize(t);\n          return r === d.sanitize(e) ? \"\" : r;\n        }\n      }, {\n        key: \"externalize\",\n        value: function externalize(t) {\n          var e = this.getContextPath();\n          return t.startsWith(e) ? t : \"\".concat(e).concat(t);\n        }\n      }, {\n        key: \"internalize\",\n        value: function internalize(t) {\n          if (!t || \"string\" != typeof t) return \"\";\n          var e = this.getContextPath();\n          return t.replace(new RegExp(\"^\".concat(e, \"/\")), \"/\");\n        }\n      }, {\n        key: \"getMetaPropertyValue\",\n        value: function getMetaPropertyValue(t) {\n          var e = null;\n\n          if (this.isBrowser()) {\n            var _r = document.head.querySelector(\"meta[property=\\\"\".concat(t, \"\\\"]\"));\n\n            e = _r ? _r.getAttribute(\"content\") : null;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"convertToModelUrl\",\n        value: function convertToModelUrl(t) {\n          return t && t.replace && t.replace(/\\.htm(l)?$/, l.DEFAULT_MODEL_JSON_EXTENSION);\n        }\n      }, {\n        key: \"getCurrentPageModelUrl\",\n        value: function getCurrentPageModelUrl() {\n          var t = this.getCurrentPathname();\n          var e = null;\n          return t && (e = this.convertToModelUrl(t) || null), e;\n        }\n      }, {\n        key: \"getModelUrl\",\n        value: function getModelUrl(t) {\n          if (t && t.replace) return this.convertToModelUrl(t);\n          var e = this.getMetaPropertyValue(c.a.PAGE_MODEL_ROOT_URL);\n          return e || this.getCurrentPageModelUrl();\n        }\n      }, {\n        key: \"sanitize\",\n        value: function sanitize(t) {\n          if (!t || \"string\" != typeof t) return;\n          var e = o.a.parse(t, !1, !0).pathname;\n\n          if (e) {\n            e = this.internalize(e);\n\n            var _t = e.indexOf(\".\");\n\n            _t > -1 && (e = e.substr(0, _t)), e = Object(n.normalize)(e);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"addExtension\",\n        value: function addExtension(t, e) {\n          if (!e || e.length < 1) return t;\n          if (e.startsWith(\".\") || (e = \".\" + e), !t || t.length < 1 || t.indexOf(e) > -1) return t;\n          var r = t;\n          var n = /^((?:[/a-zA-Z0-9:_-]*)+)(?:\\.?)([a-zA-Z0-9._-]*)(?:\\/?)([a-zA-Z0-9/._-]*)(?:\\??)([a-zA-Z0-9=&]*)$/g.exec(t);\n          var i = \"\";\n          return n && n.length > 2 && (i = n[3] ? \"/\" + n[3] : \"\", i += n[4] ? \"?\" + n[4] : \"\", r = n[1] + \".\" + n[2].replace(/\\.htm(l)?/, e) + i), r.indexOf(e) > -1 ? r : r + e + i;\n        }\n      }, {\n        key: \"addSelector\",\n        value: function addSelector(t, e) {\n          if (!e || e.length < 1) return t;\n          if (e.startsWith(\".\") || (e = \".\" + e), !t || t.length < 1 || t.indexOf(e) > -1) return t;\n          var r = t.indexOf(\".\") || t.length;\n          return r < 0 ? t + e : t.slice(0, r) + e + t.slice(r, t.length);\n        }\n      }, {\n        key: \"getCurrentPathname\",\n        value: function getCurrentPathname() {\n          return this.isBrowser() ? window.location.pathname : null;\n        }\n      }, {\n        key: \"dispatchGlobalCustomEvent\",\n        value: function dispatchGlobalCustomEvent(t, e) {\n          this.isBrowser() && window.dispatchEvent(new CustomEvent(t, e));\n        }\n      }, {\n        key: \"join\",\n        value: function join(t) {\n          return t ? this.normalize(t.filter(function (t) {\n            return t;\n          }).join(\"/\")) : \"\";\n        }\n      }, {\n        key: \"normalize\",\n        value: function normalize(t) {\n          return t ? t.replace(/\\/+/g, \"/\") : \"\";\n        }\n      }, {\n        key: \"makeAbsolute\",\n        value: function makeAbsolute(t) {\n          return t && \"string\" == typeof t ? t.startsWith(\"/\") ? t : \"/\" + t : \"\";\n        }\n      }, {\n        key: \"makeRelative\",\n        value: function makeRelative(t) {\n          return t && \"string\" == typeof t ? t.startsWith(\"/\") ? t.slice(1) : t : \"\";\n        }\n      }, {\n        key: \"getParentNodePath\",\n        value: function getParentNodePath(t) {\n          if (t && t.length > 0) {\n            var _e = t.lastIndexOf(\"/\") + 1;\n\n            if (_e < t.length) return t.substring(0, _e - 1);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"isItem\",\n        value: function isItem(t) {\n          return new RegExp(u).test(t);\n        }\n      }, {\n        key: \"getNodeName\",\n        value: function getNodeName(t) {\n          return (\"string\" == typeof t ? t.replace(/\\/+/g, \"/\").split(/\\//).filter(Boolean) : []).pop() || null;\n        }\n      }, {\n        key: \"subpath\",\n        value: function subpath(t, e) {\n          if (!t) return \"\";\n          var r = d.makeRelative(t).split(\"/\"),\n              n = d.makeRelative(e).split(\"/\");\n          if (r.length < n.length) return t;\n          var i;\n\n          for (i = 0; i < n.length && r[i] === n[i]; ++i) {\n            ;\n          }\n\n          return i === n.length ? r.slice(i).join(\"/\") : t;\n        }\n      }, {\n        key: \"splitByDelimitators\",\n        value: function splitByDelimitators(t, e) {\n          var r = [t];\n          return e.forEach(function (t) {\n            var e = [];\n            var n = d.normalize(d.makeAbsolute(t) + \"/\");\n            r.forEach(function (r) {\n              if (e = e.concat(r.split(n)), r.endsWith(t)) {\n                var _r2 = e.splice(e.length - 1, 1)[0];\n                _r2 !== t && (e = e.concat(_r2.split(d.makeAbsolute(t))));\n              }\n\n              e = e.filter(function (t) {\n                return t;\n              });\n            }), r = e;\n          }), r;\n        }\n      }, {\n        key: \"_getJCRPath\",\n        value: function _getJCRPath(t, e) {\n          return [t, a.a.JCR_CONTENT, e].join(\"/\");\n        }\n      }, {\n        key: \"splitPageContentPaths\",\n        value: function splitPageContentPaths(t) {\n          if (!t && \"string\" != typeof t) return;\n          var e = t.split(\"/\".concat(a.a.JCR_CONTENT, \"/\")),\n              r = {\n            pagePath: e[0]\n          };\n          return e.length > 1 && (r.itemPath = e[1]), r;\n        }\n      }, {\n        key: \"trimStrings\",\n        value: function trimStrings(t, e) {\n          return e.forEach(function (e) {\n            for (; t.startsWith(e);) {\n              t = d.makeRelative(t.slice(e.length));\n            }\n\n            for (; t.endsWith(e);) {\n              (t = t.slice(0, t.length - e.length)).endsWith(\"/\") && (t = t.slice(0, t.length - 1));\n            }\n          }), t;\n        }\n      }, {\n        key: \"_getStartStrings\",\n        value: function _getStartStrings(t, e) {\n          var r = \"\";\n          return e.forEach(function (e) {\n            for (; t.startsWith(e);) {\n              t = d.makeRelative(t.slice(e.length)), r = \"\".concat(r, \"/\").concat(e);\n            }\n          }), d.makeRelative(r);\n        }\n      }]);\n\n      return d;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    var n = function n() {\n      _classCallCheck(this, n);\n    };\n\n    n.TYPE_PROP = \":type\", n.ITEMS_PROP = \":items\", n.ITEMS_ORDER_PROP = \":itemsOrder\", n.PATH_PROP = \":path\", n.CHILDREN_PROP = \":children\", n.HIERARCHY_TYPE_PROP = \":hierarchyType\", n.JCR_CONTENT = \"jcr:content\", e.a = n;\n  }, function (t, e) {\n    t.exports = require(\"clone\");\n  }, function (t, e, r) {\n    \"use strict\";\n\n    var n = function n() {\n      _classCallCheck(this, n);\n    };\n\n    n.PAGE_MODEL_ROOT_URL = \"cq:pagemodel_root_url\", n.PAGE_MODEL_ROUTE_FILTERS = \"cq:pagemodel_route_filters\", n.PAGE_MODEL_ROUTER = \"cq:pagemodel_router\", e.a = n;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    var n = function n() {\n      _classCallCheck(this, n);\n    };\n\n    n.PAGE_MODEL_INIT = \"cq-pagemodel-init\", n.PAGE_MODEL_LOADED = \"cq-pagemodel-loaded\", n.PAGE_MODEL_UPDATE = \"cq-pagemodel-update\", n.PAGE_MODEL_ROUTE_CHANGED = \"cq-pagemodel-route-changed\", e.a = n;\n  }, function (t, e, r) {\n    \"use strict\";\n\n    r.d(e, \"a\", function () {\n      return n;\n    });\n\n    var n = /*#__PURE__*/function () {\n      function n(t) {\n        _classCallCheck(this, n);\n\n        this._apiHost = t || \"\", this._fetchPromises = {};\n      }\n\n      _createClass(n, [{\n        key: \"fetch\",\n        value: function (_fetch) {\n          function fetch(_x) {\n            return _fetch.apply(this, arguments);\n          }\n\n          fetch.toString = function () {\n            return _fetch.toString();\n          };\n\n          return fetch;\n        }(function (t) {\n          if (!t) {\n            var _e2 = \"Fetching model rejected for path: \" + t;\n\n            return Promise.reject(new Error(_e2));\n          }\n\n          var e = this._apiHost || \"\";\n          return fetch(\"\".concat(e).concat(t), {\n            credentials: \"same-origin\"\n          }).then(function (t) {\n            if (t.status >= 200 && t.status < 300) return t.json();\n            throw {\n              response: t\n            };\n          })[\"catch\"](function (t) {\n            return Promise.reject(t);\n          });\n        })\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._apiHost = null, this._fetchPromises = null;\n        }\n      }]);\n\n      return n;\n    }();\n  }, function (t, e, r) {\n    \"use strict\";\n\n    var n = r(1),\n        i = r(2),\n        o = r.n(i),\n        a = r(4),\n        s = r(0);\n\n    function l(t) {\n      s.a.dispatchGlobalCustomEvent(a.a.PAGE_MODEL_LOADED, {\n        detail: {\n          model: o()(t)\n        }\n      });\n    }\n\n    var c = /*#__PURE__*/function () {\n      function c(t) {\n        var _this = this;\n\n        _classCallCheck(this, c);\n\n        this._modelManager = t, this._windowListener = function (t) {\n          t && t.detail && t.detail.msg ? _this._updateModel(t.detail.msg) : console.error(\"EditorService.js\", \"No message passed to cq-pagemodel-update\", t);\n        }, s.a.isBrowser() && window.addEventListener(a.a.PAGE_MODEL_UPDATE, this._windowListener);\n      }\n\n      _createClass(c, [{\n        key: \"_updateModel\",\n        value: function _updateModel(t) {\n          if (!t || !t.cmd || !t.path) return void console.error(\"PageModelManager.js\", \"Not enough data received to update the page model\");\n          var e = t.path,\n              r = t.cmd,\n              n = o()(t.data);\n          var i, a, c;\n          var h = s.a.getParentNodePath(e);\n\n          switch (r) {\n            case \"replace\":\n              this._modelManager.modelStore.setData(e, n), this._modelManager._notifyListeners(e);\n              break;\n\n            case \"delete\":\n              this._modelManager.modelStore.removeData(e), h && this._modelManager._notifyListeners(h);\n              break;\n\n            case \"insertBefore\":\n              c = !0;\n\n            case \"insertAfter\":\n              i = s.a.getNodeName(e), h && (a = h + \"/\" + n.key, this._modelManager.modelStore.insertData(a, n.value, i, c), this._modelManager._notifyListeners(h));\n              break;\n\n            default:\n              console.log(\"EditorClient\", \"unsupported command:\", r);\n          }\n\n          l(this._modelManager.modelStore.dataMap);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          delete this._modelManager, s.a.isBrowser() && window.removeEventListener(a.a.PAGE_MODEL_UPDATE, this._windowListener);\n        }\n      }]);\n\n      return c;\n    }();\n\n    var h = r(3),\n        u = r(5);\n\n    var d = /*#__PURE__*/function () {\n      function d(t, e) {\n        _classCallCheck(this, d);\n\n        this._data = null, this._rootPath = null, this.initialize(t, e || {}), this._pageContentDelimiter = [n.a.JCR_CONTENT];\n      }\n\n      _createClass(d, [{\n        key: \"initialize\",\n        value: function initialize(t, e) {\n          e && (this._data = e), this._rootPath = t;\n        }\n      }, {\n        key: \"setData\",\n        value: function setData(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var r = s.a.getNodeName(t);\n\n          if (r) {\n            var _i = this.getData(s.a.getParentNodePath(t), !1);\n\n            if (_i && _i[n.a.ITEMS_PROP]) {\n              var _t2 = o()(e),\n                  _a = _i[n.a.ITEMS_PROP] || {};\n\n              _a[r] = _t2.value, _i[n.a.ITEMS_PROP] = _a;\n            }\n          }\n        }\n      }, {\n        key: \"getData\",\n        value: function getData(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n          if (!t && \"string\" != typeof t) return e ? o()(this._data) : this._data;\n          if (t === this._rootPath || t === \"\".concat(this._rootPath, \"/\").concat(n.a.JCR_CONTENT)) return e ? o()(this._data) : this._data;\n          var r = s.a.splitPageContentPaths(t);\n\n          if (r) {\n            var _t3 = this._getPageData(r.pagePath);\n\n            if (!_t3 || !r.itemPath) return e ? o()(_t3) : _t3;\n\n            var _n = this._findItemData(r.itemPath, _t3);\n\n            if (_n) return e ? o()(_n.data) : _n.data;\n          }\n        }\n      }, {\n        key: \"insertData\",\n        value: function insertData(t, e, r) {\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n          if (e = o()(e), !t) return void console.warn(\"No path provided for data: \" + e);\n          if (!s.a.isItem(t) && this._data && this._data[n.a.CHILDREN_PROP]) return void (this._data[n.a.CHILDREN_PROP][t] = e);\n          var a = s.a.splitPageContentPaths(t);\n\n          if (a && a.itemPath) {\n            var _t4 = this._getPageData(a.pagePath),\n                _o = this._findItemData(a.itemPath, _t4).parent || _t4 || this._data,\n                _l = s.a.getNodeName(a.itemPath);\n\n            if (null != _l && _o && Object.prototype.hasOwnProperty.call(_o, n.a.ITEMS_PROP)) {\n              var _t5 = _o[n.a.ITEMS_PROP];\n\n              if (_t5) {\n                _t5[_l] = e;\n                var _a2 = _o[n.a.ITEMS_ORDER_PROP];\n\n                if (null != _a2 && _a2.length > 0 && null != r) {\n                  var _t6 = _a2.indexOf(r);\n\n                  _t6 > -1 ? _a2.splice(i ? _t6 : _t6 + 1, 0, _l) : _a2.push(_l);\n                }\n              }\n            }\n          }\n        }\n      }, {\n        key: \"removeData\",\n        value: function removeData(t) {\n          if (!t) return null;\n          if (!s.a.isItem(t) && this._data && this._data[n.a.CHILDREN_PROP]) return delete this._data[n.a.CHILDREN_PROP][t], null;\n          var e = s.a.splitPageContentPaths(t);\n\n          if (e && e.itemPath) {\n            var _t7 = this._getPageData(e.pagePath),\n                _r3 = this._findItemData(e.itemPath, _t7);\n\n            if (_r3.data && _r3 && _r3.parent && Object.prototype.hasOwnProperty.call(_r3.parent, n.a.ITEMS_PROP)) {\n              var _t8 = _r3.parent,\n                  _i2 = _t8[n.a.ITEMS_PROP],\n                  _o2 = s.a.getNodeName(e.itemPath);\n\n              if (_o2) {\n                _i2 && delete _i2[_o2], delete _r3.data, delete _r3.parent;\n                var _e3 = _t8[n.a.ITEMS_ORDER_PROP];\n\n                if (_e3 && _e3.length > 0) {\n                  var _t9 = _e3.indexOf(_o2);\n\n                  _e3.splice(_t9, 1);\n                }\n\n                return _r3.parentPath ? _r3.parentPath : null;\n              }\n            }\n          }\n\n          return console.warn(\"Item for path \".concat(t, \" was not found! Nothing to remove then.\")), null;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._data = null, this._rootPath = null, this._pageContentDelimiter = null, delete this._data, delete this._rootPath, delete this._pageContentDelimiter;\n        }\n      }, {\n        key: \"_findItemData\",\n        value: function _findItemData(t) {\n          var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._data;\n          var r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"\";\n          var o = {\n            parent: r,\n            parentPath: i\n          };\n          if (!e) throw new Error(\"Assertion error: No data provided. This should never happen.\");\n          var a = e[n.a.ITEMS_PROP];\n          if (!a) return o;\n\n          for (var _e4 in a) {\n            if (!Object.prototype.hasOwnProperty.call(a, _e4)) continue;\n            var _r4 = a[_e4];\n            if (_e4 === t) return o.data = a[_e4], o.key = _e4, o;\n            {\n              var _n2 = s.a.subpath(t, _e4);\n\n              if (!this._pageContentDelimiter) throw new Error(\"_pageContentDelimiter not set. this should never happen as its set in constructor.\");\n              {\n                var _o3 = s.a._getStartStrings(_n2, this._pageContentDelimiter),\n                    _a3 = s.a.join([i, _e4, _o3]);\n\n                if (_n2 = s.a.trimStrings(_n2, this._pageContentDelimiter), _n2 !== t) {\n                  var _t10 = this._findItemData(_n2, _r4, _r4, _a3);\n\n                  if (_t10) return _t10;\n                }\n              }\n            }\n          }\n\n          return o;\n        }\n      }, {\n        key: \"_getPageData\",\n        value: function _getPageData(t) {\n          if (!this._data) return;\n          if (\"\" === t || t === this._data[n.a.PATH_PROP] || t === this.rootPath) return this._data;\n          var e = this._data[n.a.CHILDREN_PROP];\n          return e && e[t];\n        }\n      }, {\n        key: \"rootPath\",\n        get: function get() {\n          return this._rootPath || \"\";\n        }\n      }, {\n        key: \"dataMap\",\n        get: function get() {\n          return this._data;\n        }\n      }]);\n\n      return d;\n    }();\n\n    e.a = new ( /*#__PURE__*/function () {\n      function _class() {\n        _classCallCheck(this, _class);\n\n        this._listenersMap = {}, this._fetchPromises = {};\n      }\n\n      _createClass(_class, [{\n        key: \"initialize\",\n        value: function initialize(t) {\n          var _this2 = this;\n\n          var e;\n          this.destroy();\n          var r = null;\n          t && \"string\" != typeof t ? t && (e = t.path, this._modelClient = t.modelClient, r = t.model) : e = t, this._listenersMap = {}, this._fetchPromises = {}, this._initPromise = null;\n          var i = s.a.getMetaPropertyValue(h.a.PAGE_MODEL_ROOT_URL),\n              o = s.a.internalize(i),\n              a = s.a.getCurrentPathname(),\n              f = a ? s.a.sanitize(a) : \"\",\n              p = e || o || f;\n          if (!p) throw new Error(\"ModelManager.js Cannot initialize without an URL to fetch the root model\");\n          return this._modelClient || (this._modelClient = new u.a()), this._editorClient = new c(this), this._modelStore = r ? new d(p, r) : new d(p), this._initPromise = this._checkDependencies().then(function () {\n            var t = s.a.sanitize(p);\n            if (!t) throw new Error(\"No root modelpath resolved! This should never happen.\");\n\n            var e = _this2.modelStore.getData(t);\n\n            return e && Object.keys(e).length > 0 ? (l(e), e) : _this2._fetchData(p).then(function (e) {\n              if (_this2.modelStore.initialize(t, e), a && f) {\n                if (i = o, (r = a) && i && s.a.sanitize(r) !== s.a.sanitize(i) && !function (t, e) {\n                  var r = s.a.sanitize(e);\n                  return !!r && !!(t && e && t[n.a.CHILDREN_PROP] && t[n.a.CHILDREN_PROP][r]);\n                }(e, a)) return _this2._fetchData(a).then(function (t) {\n                  _this2.modelStore.insertData(f, t);\n\n                  var e = _this2.modelStore.getData();\n\n                  return l(e), e;\n                });\n                {\n                  var _t11 = _this2.modelStore.getData();\n\n                  return l(_t11), _t11;\n                }\n              }\n\n              throw new Error(\"Attempting to retrieve model data from a non-browser. Please provide the initial data with the property key model\");\n              var r, i;\n            });\n          }), this._initPromise;\n        }\n      }, {\n        key: \"getData\",\n        value: function getData(t) {\n          var _this3 = this;\n\n          var e,\n              r = !1;\n          \"string\" == typeof t ? e = t : t ? (e = t.path || \"\", r = !!t.forceReload || !1) : e = \"\";\n          return (this._initPromise || Promise.resolve()).then(function () {\n            return _this3._checkDependencies();\n          }).then(function () {\n            if (!r) {\n              var _t12 = _this3.modelStore.getData(e);\n\n              if (_t12) return Promise.resolve(_t12);\n            }\n\n            return _this3._fetchData(e).then(function (t) {\n              return _this3._storeData(e, t);\n            });\n          });\n        }\n      }, {\n        key: \"_fetchData\",\n        value: function _fetchData(t) {\n          var _this4 = this;\n\n          if (Object.prototype.hasOwnProperty.call(this._fetchPromises, t)) return this._fetchPromises[t];\n\n          if (this.modelClient) {\n            var _e5 = this.modelClient.fetch(this._toModelPath(t));\n\n            return this._fetchPromises[t] = _e5, _e5.then(function (e) {\n              return delete _this4._fetchPromises[t], e;\n            })[\"catch\"](function (e) {\n              return delete _this4._fetchPromises[t], e;\n            }), _e5;\n          }\n\n          throw new Error(\"ModelClient not initialized!\");\n        }\n      }, {\n        key: \"_notifyListeners\",\n        value: function _notifyListeners(t) {\n          if (t = s.a.adaptPagePath.call(this, t), !this._listenersMap) throw new Error(\"ListenersMap is undefined.\");\n          var e = this._listenersMap[t];\n          e && e.length && e.forEach(function (r) {\n            try {\n              r();\n            } catch (r) {\n              console.error(\"Error in listener \".concat(e, \" at path \").concat(t, \": \").concat(r));\n            }\n          });\n        }\n      }, {\n        key: \"addListener\",\n        value: function addListener(t, e) {\n          if (!this._listenersMap) throw new Error(\"ListenersMap is undefined.\");\n          if (!t && \"string\" != typeof t) return;\n          var r = this.adaptPagePath(t);\n          this._listenersMap[r] = this._listenersMap[t] || [], this._listenersMap[r].push(e);\n        }\n      }, {\n        key: \"removeListener\",\n        value: function removeListener(t, e) {\n          if (!this._listenersMap) throw new Error(\"ListenersMap is undefined.\");\n          if (!t) return;\n          var r = this.adaptPagePath(t),\n              n = this._listenersMap[r];\n\n          if (n) {\n            var _t13 = n.indexOf(e);\n\n            -1 !== _t13 && n.splice(_t13, 1);\n          }\n        }\n      }, {\n        key: \"adaptPagePath\",\n        value: function adaptPagePath(t) {\n          if (!t) return \"\";\n          var e = s.a.internalize(t);\n          if (!this.modelStore || !this.modelStore.rootPath) return e;\n          return e === s.a.sanitize(this.modelStore.rootPath) ? \"\" : e;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          delete this._fetchPromises, delete this._listenersMap, this._modelClient && this._modelClient.destroy && this._modelClient.destroy(), this._modelStore && this._modelStore.destroy && this._modelStore.destroy(), this._editorClient && this._editorClient.destroy && this._editorClient.destroy();\n        }\n      }, {\n        key: \"_storeData\",\n        value: function _storeData(t, e) {\n          var r = !1;\n          return this._modelStore && (r = s.a.isItem(t)), this.modelStore.insertData(t, e), this._notifyListeners(t), r || this._notifyListeners(\"\"), e;\n        }\n      }, {\n        key: \"_toModelPath\",\n        value: function _toModelPath(t) {\n          var e = s.a.addSelector(t, \"model\");\n          return e = s.a.addExtension(e, \"json\"), e = s.a.externalize(e), s.a.makeAbsolute(e);\n        }\n      }, {\n        key: \"_checkDependencies\",\n        value: function _checkDependencies() {\n          return this.modelClient ? this.modelStore ? Promise.resolve() : Promise.reject(\"No ModelManager registered.\") : Promise.reject(\"No ModelClient registered.\");\n        }\n      }, {\n        key: \"modelClient\",\n        get: function get() {\n          if (!this._modelClient) throw new Error(\"ModelClient is undefined. Call initialize first!\");\n          return this._modelClient;\n        }\n      }, {\n        key: \"modelStore\",\n        get: function get() {\n          if (!this._modelStore) throw new Error(\"ModelStore is undefined. Call initialize first!\");\n          return this._modelStore;\n        }\n      }, {\n        key: \"rootPath\",\n        get: function get() {\n          return this.modelStore.rootPath;\n        }\n      }]);\n\n      return _class;\n    }())();\n  }, function (t, e) {}, function (t, e, r) {\n    (function (t) {\n      function r(t, e) {\n        for (var r = 0, n = t.length - 1; n >= 0; n--) {\n          var i = t[n];\n          \".\" === i ? t.splice(n, 1) : \"..\" === i ? (t.splice(n, 1), r++) : r && (t.splice(n, 1), r--);\n        }\n\n        if (e) for (; r--; r) {\n          t.unshift(\"..\");\n        }\n        return t;\n      }\n\n      function n(t, e) {\n        if (t.filter) return t.filter(e);\n\n        for (var r = [], n = 0; n < t.length; n++) {\n          e(t[n], n, t) && r.push(t[n]);\n        }\n\n        return r;\n      }\n\n      e.resolve = function () {\n        for (var e = \"\", i = !1, o = arguments.length - 1; o >= -1 && !i; o--) {\n          var a = o >= 0 ? arguments[o] : t.cwd();\n          if (\"string\" != typeof a) throw new TypeError(\"Arguments to path.resolve must be strings\");\n          a && (e = a + \"/\" + e, i = \"/\" === a.charAt(0));\n        }\n\n        return (i ? \"/\" : \"\") + (e = r(n(e.split(\"/\"), function (t) {\n          return !!t;\n        }), !i).join(\"/\")) || \".\";\n      }, e.normalize = function (t) {\n        var o = e.isAbsolute(t),\n            a = \"/\" === i(t, -1);\n        return (t = r(n(t.split(\"/\"), function (t) {\n          return !!t;\n        }), !o).join(\"/\")) || o || (t = \".\"), t && a && (t += \"/\"), (o ? \"/\" : \"\") + t;\n      }, e.isAbsolute = function (t) {\n        return \"/\" === t.charAt(0);\n      }, e.join = function () {\n        var t = Array.prototype.slice.call(arguments, 0);\n        return e.normalize(n(t, function (t, e) {\n          if (\"string\" != typeof t) throw new TypeError(\"Arguments to path.join must be strings\");\n          return t;\n        }).join(\"/\"));\n      }, e.relative = function (t, r) {\n        function n(t) {\n          for (var e = 0; e < t.length && \"\" === t[e]; e++) {\n            ;\n          }\n\n          for (var r = t.length - 1; r >= 0 && \"\" === t[r]; r--) {\n            ;\n          }\n\n          return e > r ? [] : t.slice(e, r - e + 1);\n        }\n\n        t = e.resolve(t).substr(1), r = e.resolve(r).substr(1);\n\n        for (var i = n(t.split(\"/\")), o = n(r.split(\"/\")), a = Math.min(i.length, o.length), s = a, l = 0; l < a; l++) {\n          if (i[l] !== o[l]) {\n            s = l;\n            break;\n          }\n        }\n\n        var c = [];\n\n        for (l = s; l < i.length; l++) {\n          c.push(\"..\");\n        }\n\n        return (c = c.concat(o.slice(s))).join(\"/\");\n      }, e.sep = \"/\", e.delimiter = \":\", e.dirname = function (t) {\n        if (\"string\" != typeof t && (t += \"\"), 0 === t.length) return \".\";\n\n        for (var e = t.charCodeAt(0), r = 47 === e, n = -1, i = !0, o = t.length - 1; o >= 1; --o) {\n          if (47 === (e = t.charCodeAt(o))) {\n            if (!i) {\n              n = o;\n              break;\n            }\n          } else i = !1;\n        }\n\n        return -1 === n ? r ? \"/\" : \".\" : r && 1 === n ? \"/\" : t.slice(0, n);\n      }, e.basename = function (t, e) {\n        var r = function (t) {\n          \"string\" != typeof t && (t += \"\");\n          var e,\n              r = 0,\n              n = -1,\n              i = !0;\n\n          for (e = t.length - 1; e >= 0; --e) {\n            if (47 === t.charCodeAt(e)) {\n              if (!i) {\n                r = e + 1;\n                break;\n              }\n            } else -1 === n && (i = !1, n = e + 1);\n          }\n\n          return -1 === n ? \"\" : t.slice(r, n);\n        }(t);\n\n        return e && r.substr(-1 * e.length) === e && (r = r.substr(0, r.length - e.length)), r;\n      }, e.extname = function (t) {\n        \"string\" != typeof t && (t += \"\");\n\n        for (var e = -1, r = 0, n = -1, i = !0, o = 0, a = t.length - 1; a >= 0; --a) {\n          var s = t.charCodeAt(a);\n          if (47 !== s) -1 === n && (i = !1, n = a + 1), 46 === s ? -1 === e ? e = a : 1 !== o && (o = 1) : -1 !== e && (o = -1);else if (!i) {\n            r = a + 1;\n            break;\n          }\n        }\n\n        return -1 === e || -1 === n || 0 === o || 1 === o && e === n - 1 && e === r + 1 ? \"\" : t.slice(e, n);\n      };\n      var i = \"b\" === \"ab\".substr(-1) ? function (t, e, r) {\n        return t.substr(e, r);\n      } : function (t, e, r) {\n        return e < 0 && (e = t.length + e), t.substr(e, r);\n      };\n    }).call(this, r(12));\n  }, function (t, e) {\n    t.exports = require(\"url\");\n  }, function (t, e, r) {\n    \"use strict\";\n\n    r.r(e);\n    r(11);\n    var n = r(6);\n    r.d(e, \"ModelManager\", function () {\n      return n.a;\n    });\n    var i = r(7);\n\n    for (var o in i) {\n      [\"default\", \"ModelManager\", \"Constants\"].indexOf(o) < 0 && function (t) {\n        r.d(e, t, function () {\n          return i[t];\n        });\n      }(o);\n    }\n\n    var a = r(5);\n    r.d(e, \"ModelClient\", function () {\n      return a.a;\n    });\n    var s = r(0);\n    r.d(e, \"PathUtils\", function () {\n      return s.a;\n    });\n    var l = r(1);\n    r.d(e, \"Constants\", function () {\n      return l.a;\n    });\n  }, function (t, e, r) {\n    \"use strict\";\n\n    var n = r(4),\n        i = r(3),\n        o = r(6),\n        a = r(0);\n\n    var s = function s() {\n      _classCallCheck(this, s);\n    };\n\n    function l(t) {\n      var e = function () {\n        var t = a.a.getMetaPropertyValue(i.a.PAGE_MODEL_ROUTE_FILTERS);\n        return t ? t.split(\",\") : [];\n      }();\n\n      for (var _r5 = 0, _n3 = e.length; _r5 < _n3; _r5++) {\n        if (new RegExp(e[_r5]).test(t)) return !0;\n      }\n\n      return !1;\n    }\n\n    function c() {\n      if (!a.a.isBrowser()) return !1;\n      var t = a.a.getMetaPropertyValue(i.a.PAGE_MODEL_ROUTER);\n      return !t || s.DISABLED !== t;\n    }\n\n    function h(t) {\n      if (!c()) return;\n\n      var e = function (t) {\n        var e = t || window.location.pathname;\n        var r = e.indexOf(\".\");\n\n        if (r < 0) {\n          var _t14 = e.indexOf(\"?\");\n\n          r = _t14 < 0 ? e.length : _t14;\n        }\n\n        return e.substr(0, r);\n      }(t);\n\n      e && \"/\" !== e && !l(e) && function (t) {\n        o.a.getData({\n          path: t\n        }).then(function (t) {\n          a.a.dispatchGlobalCustomEvent(n.a.PAGE_MODEL_ROUTE_CHANGED, {\n            detail: {\n              model: t\n            }\n          });\n        });\n      }(e);\n    }\n\n    if (s.DISABLED = \"disabled\", s.CONTENT_PATH = \"path\", c()) {\n      var _t15 = window.history.pushState,\n          _e6 = window.history.replaceState;\n      window.history.pushState = function (e, r, n) {\n        return h(n || null), _t15.apply(history, [e, r, n]);\n      }, window.history.replaceState = function (t, r, n) {\n        return h(n || null), _e6.apply(history, [t, r, n]);\n      };\n    }\n  }, function (t, e) {\n    var r,\n        n,\n        i = t.exports = {};\n\n    function o() {\n      throw new Error(\"setTimeout has not been defined\");\n    }\n\n    function a() {\n      throw new Error(\"clearTimeout has not been defined\");\n    }\n\n    function s(t) {\n      if (r === setTimeout) return setTimeout(t, 0);\n      if ((r === o || !r) && setTimeout) return r = setTimeout, setTimeout(t, 0);\n\n      try {\n        return r(t, 0);\n      } catch (e) {\n        try {\n          return r.call(null, t, 0);\n        } catch (e) {\n          return r.call(this, t, 0);\n        }\n      }\n    }\n\n    !function () {\n      try {\n        r = \"function\" == typeof setTimeout ? setTimeout : o;\n      } catch (t) {\n        r = o;\n      }\n\n      try {\n        n = \"function\" == typeof clearTimeout ? clearTimeout : a;\n      } catch (t) {\n        n = a;\n      }\n    }();\n    var l,\n        c = [],\n        h = !1,\n        u = -1;\n\n    function d() {\n      h && l && (h = !1, l.length ? c = l.concat(c) : u = -1, c.length && f());\n    }\n\n    function f() {\n      if (!h) {\n        var t = s(d);\n        h = !0;\n\n        for (var e = c.length; e;) {\n          for (l = c, c = []; ++u < e;) {\n            l && l[u].run();\n          }\n\n          u = -1, e = c.length;\n        }\n\n        l = null, h = !1, function (t) {\n          if (n === clearTimeout) return clearTimeout(t);\n          if ((n === a || !n) && clearTimeout) return n = clearTimeout, clearTimeout(t);\n\n          try {\n            n(t);\n          } catch (e) {\n            try {\n              return n.call(null, t);\n            } catch (e) {\n              return n.call(this, t);\n            }\n          }\n        }(t);\n      }\n    }\n\n    function p(t, e) {\n      this.fun = t, this.array = e;\n    }\n\n    function _() {}\n\n    i.nextTick = function (t) {\n      var e = new Array(arguments.length - 1);\n      if (arguments.length > 1) for (var r = 1; r < arguments.length; r++) {\n        e[r - 1] = arguments[r];\n      }\n      c.push(new p(t, e)), 1 !== c.length || h || s(f);\n    }, p.prototype.run = function () {\n      this.fun.apply(null, this.array);\n    }, i.title = \"browser\", i.browser = !0, i.env = {}, i.argv = [], i.version = \"\", i.versions = {}, i.on = _, i.addListener = _, i.once = _, i.off = _, i.removeListener = _, i.removeAllListeners = _, i.emit = _, i.prependListener = _, i.prependOnceListener = _, i.listeners = function (t) {\n      return [];\n    }, i.binding = function (t) {\n      throw new Error(\"process.binding is not supported\");\n    }, i.cwd = function () {\n      return \"/\";\n    }, i.chdir = function (t) {\n      throw new Error(\"process.chdir is not supported\");\n    }, i.umask = function () {\n      return 0;\n    };\n  }]);\n});","map":{"version":3,"sources":["/Users/nehaprakash/code/aem-guides-wknd-spa/ui.frontend/node_modules/@adobe/cq-spa-page-model-manager/dist/cq-spa-page-model-manager.js"],"names":["t","e","exports","module","define","amd","cqSpaPageModelManager","self","r","n","i","l","call","m","c","d","o","Object","defineProperty","enumerable","get","Symbol","toStringTag","value","__esModule","create","bind","prototype","hasOwnProperty","p","s","a","DEFAULT_SLING_MODEL_SELECTOR","DEFAULT_MODEL_JSON_EXTENSION","h","u","JCR_CONTENT","window","getCurrentPathname","match","index","slice","internalize","sanitize","getContextPath","startsWith","replace","RegExp","isBrowser","document","head","querySelector","getAttribute","convertToModelUrl","getMetaPropertyValue","PAGE_MODEL_ROOT_URL","getCurrentPageModelUrl","parse","pathname","indexOf","substr","normalize","length","exec","location","dispatchEvent","CustomEvent","filter","join","lastIndexOf","substring","test","split","Boolean","pop","makeRelative","forEach","makeAbsolute","concat","endsWith","splice","pagePath","itemPath","TYPE_PROP","ITEMS_PROP","ITEMS_ORDER_PROP","PATH_PROP","CHILDREN_PROP","HIERARCHY_TYPE_PROP","require","PAGE_MODEL_ROUTE_FILTERS","PAGE_MODEL_ROUTER","PAGE_MODEL_INIT","PAGE_MODEL_LOADED","PAGE_MODEL_UPDATE","PAGE_MODEL_ROUTE_CHANGED","_apiHost","_fetchPromises","Promise","reject","Error","fetch","credentials","then","status","json","response","dispatchGlobalCustomEvent","detail","model","_modelManager","_windowListener","msg","_updateModel","console","error","addEventListener","cmd","path","data","getParentNodePath","modelStore","setData","_notifyListeners","removeData","getNodeName","key","insertData","log","dataMap","removeEventListener","_data","_rootPath","initialize","_pageContentDelimiter","getData","splitPageContentPaths","_getPageData","_findItemData","warn","isItem","parent","push","parentPath","subpath","_getStartStrings","trimStrings","rootPath","_listenersMap","destroy","_modelClient","modelClient","_initPromise","f","_editorClient","_modelStore","_checkDependencies","keys","_fetchData","forceReload","resolve","_storeData","_toModelPath","adaptPagePath","addSelector","addExtension","externalize","unshift","arguments","cwd","TypeError","charAt","isAbsolute","Array","relative","Math","min","sep","delimiter","dirname","charCodeAt","basename","extname","DISABLED","CONTENT_PATH","history","pushState","replaceState","apply","setTimeout","clearTimeout","run","fun","array","_","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","chdir","umask"],"mappings":"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","sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.cqSpaPageModelManager=e():t.cqSpaPageModelManager=e()}(\"undefined\"!=typeof self?self:this,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,\"a\",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p=\"\",r(r.s=10)}([function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return d}));var n=r(8),i=r(9),o=r.n(i),a=r(1);class s{constructor(){}}s.DEFAULT_SLING_MODEL_SELECTOR=\"model\",s.DEFAULT_MODEL_JSON_EXTENSION=\".model.json\";var l=s,c=r(3);const h=/(?:\\/)(?:content|apps|libs|etc|etc.clientlibs|conf|mnt\\/overlay)(?:\\/)/,u=\"(.+)/\"+a.a.JCR_CONTENT+\"/(.+)\";class d{static isBrowser(){try{return\"undefined\"!=typeof window}catch(t){return!1}}static getContextPath(t){const e=t||this.getCurrentPathname();if(!e)return\"\";const r=e.match(h),n=null===r?-1:r.index||-1;return n>0?e.slice(0,n):\"\"}static adaptPagePath(t,e){if(!t)return\"\";if(!e)return t;const r=d.internalize(t);return r===d.sanitize(e)?\"\":r}static externalize(t){const e=this.getContextPath();return t.startsWith(e)?t:`${e}${t}`}static internalize(t){if(!t||\"string\"!=typeof t)return\"\";const e=this.getContextPath();return t.replace(new RegExp(`^${e}/`),\"/\")}static getMetaPropertyValue(t){let e=null;if(this.isBrowser()){const r=document.head.querySelector(`meta[property=\"${t}\"]`);e=r?r.getAttribute(\"content\"):null}return e}static convertToModelUrl(t){return t&&t.replace&&t.replace(/\\.htm(l)?$/,l.DEFAULT_MODEL_JSON_EXTENSION)}static getCurrentPageModelUrl(){const t=this.getCurrentPathname();let e=null;return t&&(e=this.convertToModelUrl(t)||null),e}static getModelUrl(t){if(t&&t.replace)return this.convertToModelUrl(t);const e=this.getMetaPropertyValue(c.a.PAGE_MODEL_ROOT_URL);return e||this.getCurrentPageModelUrl()}static sanitize(t){if(!t||\"string\"!=typeof t)return;let e=o.a.parse(t,!1,!0).pathname;if(e){e=this.internalize(e);const t=e.indexOf(\".\");t>-1&&(e=e.substr(0,t)),e=Object(n.normalize)(e)}return e}static addExtension(t,e){if(!e||e.length<1)return t;if(e.startsWith(\".\")||(e=\".\"+e),!t||t.length<1||t.indexOf(e)>-1)return t;let r=t;const n=/^((?:[/a-zA-Z0-9:_-]*)+)(?:\\.?)([a-zA-Z0-9._-]*)(?:\\/?)([a-zA-Z0-9/._-]*)(?:\\??)([a-zA-Z0-9=&]*)$/g.exec(t);let i=\"\";return n&&n.length>2&&(i=n[3]?\"/\"+n[3]:\"\",i+=n[4]?\"?\"+n[4]:\"\",r=n[1]+\".\"+n[2].replace(/\\.htm(l)?/,e)+i),r.indexOf(e)>-1?r:r+e+i}static addSelector(t,e){if(!e||e.length<1)return t;if(e.startsWith(\".\")||(e=\".\"+e),!t||t.length<1||t.indexOf(e)>-1)return t;const r=t.indexOf(\".\")||t.length;return r<0?t+e:t.slice(0,r)+e+t.slice(r,t.length)}static getCurrentPathname(){return this.isBrowser()?window.location.pathname:null}static dispatchGlobalCustomEvent(t,e){this.isBrowser()&&window.dispatchEvent(new CustomEvent(t,e))}static join(t){return t?this.normalize(t.filter(t=>t).join(\"/\")):\"\"}static normalize(t){return t?t.replace(/\\/+/g,\"/\"):\"\"}static makeAbsolute(t){return t&&\"string\"==typeof t?t.startsWith(\"/\")?t:\"/\"+t:\"\"}static makeRelative(t){return t&&\"string\"==typeof t?t.startsWith(\"/\")?t.slice(1):t:\"\"}static getParentNodePath(t){if(t&&t.length>0){const e=t.lastIndexOf(\"/\")+1;if(e<t.length)return t.substring(0,e-1)}return null}static isItem(t){return new RegExp(u).test(t)}static getNodeName(t){return(\"string\"==typeof t?t.replace(/\\/+/g,\"/\").split(/\\//).filter(Boolean):[]).pop()||null}static subpath(t,e){if(!t)return\"\";const r=d.makeRelative(t).split(\"/\"),n=d.makeRelative(e).split(\"/\");if(r.length<n.length)return t;let i;for(i=0;i<n.length&&r[i]===n[i];++i);return i===n.length?r.slice(i).join(\"/\"):t}static splitByDelimitators(t,e){let r=[t];return e.forEach(t=>{let e=[];const n=d.normalize(d.makeAbsolute(t)+\"/\");r.forEach(r=>{if(e=e.concat(r.split(n)),r.endsWith(t)){const r=e.splice(e.length-1,1)[0];r!==t&&(e=e.concat(r.split(d.makeAbsolute(t))))}e=e.filter(t=>t)}),r=e}),r}static _getJCRPath(t,e){return[t,a.a.JCR_CONTENT,e].join(\"/\")}static splitPageContentPaths(t){if(!t&&\"string\"!=typeof t)return;const e=t.split(`/${a.a.JCR_CONTENT}/`),r={pagePath:e[0]};return e.length>1&&(r.itemPath=e[1]),r}static trimStrings(t,e){return e.forEach(e=>{for(;t.startsWith(e);)t=d.makeRelative(t.slice(e.length));for(;t.endsWith(e);)(t=t.slice(0,t.length-e.length)).endsWith(\"/\")&&(t=t.slice(0,t.length-1))}),t}static _getStartStrings(t,e){let r=\"\";return e.forEach(e=>{for(;t.startsWith(e);)t=d.makeRelative(t.slice(e.length)),r=`${r}/${e}`}),d.makeRelative(r)}}},function(t,e,r){\"use strict\";class n{constructor(){}}n.TYPE_PROP=\":type\",n.ITEMS_PROP=\":items\",n.ITEMS_ORDER_PROP=\":itemsOrder\",n.PATH_PROP=\":path\",n.CHILDREN_PROP=\":children\",n.HIERARCHY_TYPE_PROP=\":hierarchyType\",n.JCR_CONTENT=\"jcr:content\",e.a=n},function(t,e){t.exports=require(\"clone\")},function(t,e,r){\"use strict\";class n{constructor(){}}n.PAGE_MODEL_ROOT_URL=\"cq:pagemodel_root_url\",n.PAGE_MODEL_ROUTE_FILTERS=\"cq:pagemodel_route_filters\",n.PAGE_MODEL_ROUTER=\"cq:pagemodel_router\",e.a=n},function(t,e,r){\"use strict\";class n{constructor(){}}n.PAGE_MODEL_INIT=\"cq-pagemodel-init\",n.PAGE_MODEL_LOADED=\"cq-pagemodel-loaded\",n.PAGE_MODEL_UPDATE=\"cq-pagemodel-update\",n.PAGE_MODEL_ROUTE_CHANGED=\"cq-pagemodel-route-changed\",e.a=n},function(t,e,r){\"use strict\";r.d(e,\"a\",(function(){return n}));class n{constructor(t){this._apiHost=t||\"\",this._fetchPromises={}}fetch(t){if(!t){const e=\"Fetching model rejected for path: \"+t;return Promise.reject(new Error(e))}const e=this._apiHost||\"\";return fetch(`${e}${t}`,{credentials:\"same-origin\"}).then(t=>{if(t.status>=200&&t.status<300)return t.json();throw{response:t}}).catch(t=>Promise.reject(t))}destroy(){this._apiHost=null,this._fetchPromises=null}}},function(t,e,r){\"use strict\";var n=r(1),i=r(2),o=r.n(i),a=r(4),s=r(0);function l(t){s.a.dispatchGlobalCustomEvent(a.a.PAGE_MODEL_LOADED,{detail:{model:o()(t)}})}class c{constructor(t){this._modelManager=t,this._windowListener=t=>{t&&t.detail&&t.detail.msg?this._updateModel(t.detail.msg):console.error(\"EditorService.js\",\"No message passed to cq-pagemodel-update\",t)},s.a.isBrowser()&&window.addEventListener(a.a.PAGE_MODEL_UPDATE,this._windowListener)}_updateModel(t){if(!t||!t.cmd||!t.path)return void console.error(\"PageModelManager.js\",\"Not enough data received to update the page model\");const e=t.path,r=t.cmd,n=o()(t.data);let i,a,c;const h=s.a.getParentNodePath(e);switch(r){case\"replace\":this._modelManager.modelStore.setData(e,n),this._modelManager._notifyListeners(e);break;case\"delete\":this._modelManager.modelStore.removeData(e),h&&this._modelManager._notifyListeners(h);break;case\"insertBefore\":c=!0;case\"insertAfter\":i=s.a.getNodeName(e),h&&(a=h+\"/\"+n.key,this._modelManager.modelStore.insertData(a,n.value,i,c),this._modelManager._notifyListeners(h));break;default:console.log(\"EditorClient\",\"unsupported command:\",r)}l(this._modelManager.modelStore.dataMap)}destroy(){delete this._modelManager,s.a.isBrowser()&&window.removeEventListener(a.a.PAGE_MODEL_UPDATE,this._windowListener)}}var h=r(3),u=r(5);class d{constructor(t,e){this._data=null,this._rootPath=null,this.initialize(t,e||{}),this._pageContentDelimiter=[n.a.JCR_CONTENT]}initialize(t,e){e&&(this._data=e),this._rootPath=t}get rootPath(){return this._rootPath||\"\"}get dataMap(){return this._data}setData(t,e={}){const r=s.a.getNodeName(t);if(r){const i=this.getData(s.a.getParentNodePath(t),!1);if(i&&i[n.a.ITEMS_PROP]){const t=o()(e),a=i[n.a.ITEMS_PROP]||{};a[r]=t.value,i[n.a.ITEMS_PROP]=a}}}getData(t,e=!0){if(!t&&\"string\"!=typeof t)return e?o()(this._data):this._data;if(t===this._rootPath||t===`${this._rootPath}/${n.a.JCR_CONTENT}`)return e?o()(this._data):this._data;const r=s.a.splitPageContentPaths(t);if(r){const t=this._getPageData(r.pagePath);if(!t||!r.itemPath)return e?o()(t):t;const n=this._findItemData(r.itemPath,t);if(n)return e?o()(n.data):n.data}}insertData(t,e,r,i=!1){if(e=o()(e),!t)return void console.warn(\"No path provided for data: \"+e);if(!s.a.isItem(t)&&this._data&&this._data[n.a.CHILDREN_PROP])return void(this._data[n.a.CHILDREN_PROP][t]=e);const a=s.a.splitPageContentPaths(t);if(a&&a.itemPath){const t=this._getPageData(a.pagePath),o=this._findItemData(a.itemPath,t).parent||t||this._data,l=s.a.getNodeName(a.itemPath);if(null!=l&&o&&Object.prototype.hasOwnProperty.call(o,n.a.ITEMS_PROP)){const t=o[n.a.ITEMS_PROP];if(t){t[l]=e;const a=o[n.a.ITEMS_ORDER_PROP];if(null!=a&&a.length>0&&null!=r){const t=a.indexOf(r);t>-1?a.splice(i?t:t+1,0,l):a.push(l)}}}}}removeData(t){if(!t)return null;if(!s.a.isItem(t)&&this._data&&this._data[n.a.CHILDREN_PROP])return delete this._data[n.a.CHILDREN_PROP][t],null;const e=s.a.splitPageContentPaths(t);if(e&&e.itemPath){const t=this._getPageData(e.pagePath),r=this._findItemData(e.itemPath,t);if(r.data&&r&&r.parent&&Object.prototype.hasOwnProperty.call(r.parent,n.a.ITEMS_PROP)){const{parent:t}=r,i=t[n.a.ITEMS_PROP],o=s.a.getNodeName(e.itemPath);if(o){i&&delete i[o],delete r.data,delete r.parent;const e=t[n.a.ITEMS_ORDER_PROP];if(e&&e.length>0){const t=e.indexOf(o);e.splice(t,1)}return r.parentPath?r.parentPath:null}}}return console.warn(`Item for path ${t} was not found! Nothing to remove then.`),null}destroy(){this._data=null,this._rootPath=null,this._pageContentDelimiter=null,delete this._data,delete this._rootPath,delete this._pageContentDelimiter}_findItemData(t,e=this._data,r=null,i=\"\"){const o={parent:r,parentPath:i};if(!e)throw new Error(\"Assertion error: No data provided. This should never happen.\");const a=e[n.a.ITEMS_PROP];if(!a)return o;for(const e in a){if(!Object.prototype.hasOwnProperty.call(a,e))continue;const r=a[e];if(e===t)return o.data=a[e],o.key=e,o;{let n=s.a.subpath(t,e);if(!this._pageContentDelimiter)throw new Error(\"_pageContentDelimiter not set. this should never happen as its set in constructor.\");{const o=s.a._getStartStrings(n,this._pageContentDelimiter),a=s.a.join([i,e,o]);if(n=s.a.trimStrings(n,this._pageContentDelimiter),n!==t){const t=this._findItemData(n,r,r,a);if(t)return t}}}}return o}_getPageData(t){if(!this._data)return;if(\"\"===t||t===this._data[n.a.PATH_PROP]||t===this.rootPath)return this._data;const e=this._data[n.a.CHILDREN_PROP];return e&&e[t]}}e.a=new class{constructor(){this._listenersMap={},this._fetchPromises={}}get modelClient(){if(!this._modelClient)throw new Error(\"ModelClient is undefined. Call initialize first!\");return this._modelClient}get modelStore(){if(!this._modelStore)throw new Error(\"ModelStore is undefined. Call initialize first!\");return this._modelStore}initialize(t){let e;this.destroy();let r=null;t&&\"string\"!=typeof t?t&&(e=t.path,this._modelClient=t.modelClient,r=t.model):e=t,this._listenersMap={},this._fetchPromises={},this._initPromise=null;const i=s.a.getMetaPropertyValue(h.a.PAGE_MODEL_ROOT_URL),o=s.a.internalize(i),a=s.a.getCurrentPathname(),f=a?s.a.sanitize(a):\"\",p=e||o||f;if(!p)throw new Error(\"ModelManager.js Cannot initialize without an URL to fetch the root model\");return this._modelClient||(this._modelClient=new u.a),this._editorClient=new c(this),this._modelStore=r?new d(p,r):new d(p),this._initPromise=this._checkDependencies().then(()=>{const t=s.a.sanitize(p);if(!t)throw new Error(\"No root modelpath resolved! This should never happen.\");const e=this.modelStore.getData(t);return e&&Object.keys(e).length>0?(l(e),e):this._fetchData(p).then(e=>{if(this.modelStore.initialize(t,e),a&&f){if(i=o,(r=a)&&i&&s.a.sanitize(r)!==s.a.sanitize(i)&&!function(t,e){const r=s.a.sanitize(e);return!!r&&!!(t&&e&&t[n.a.CHILDREN_PROP]&&t[n.a.CHILDREN_PROP][r])}(e,a))return this._fetchData(a).then(t=>{this.modelStore.insertData(f,t);const e=this.modelStore.getData();return l(e),e});{const t=this.modelStore.getData();return l(t),t}}throw new Error(\"Attempting to retrieve model data from a non-browser. Please provide the initial data with the property key model\");var r,i})}),this._initPromise}get rootPath(){return this.modelStore.rootPath}getData(t){let e,r=!1;\"string\"==typeof t?e=t:t?(e=t.path||\"\",r=!!t.forceReload||!1):e=\"\";return(this._initPromise||Promise.resolve()).then(()=>this._checkDependencies()).then(()=>{if(!r){const t=this.modelStore.getData(e);if(t)return Promise.resolve(t)}return this._fetchData(e).then(t=>this._storeData(e,t))})}_fetchData(t){if(Object.prototype.hasOwnProperty.call(this._fetchPromises,t))return this._fetchPromises[t];if(this.modelClient){const e=this.modelClient.fetch(this._toModelPath(t));return this._fetchPromises[t]=e,e.then(e=>(delete this._fetchPromises[t],e)).catch(e=>(delete this._fetchPromises[t],e)),e}throw new Error(\"ModelClient not initialized!\")}_notifyListeners(t){if(t=s.a.adaptPagePath.call(this,t),!this._listenersMap)throw new Error(\"ListenersMap is undefined.\");const e=this._listenersMap[t];e&&e.length&&e.forEach(r=>{try{r()}catch(r){console.error(`Error in listener ${e} at path ${t}: ${r}`)}})}addListener(t,e){if(!this._listenersMap)throw new Error(\"ListenersMap is undefined.\");if(!t&&\"string\"!=typeof t)return;const r=this.adaptPagePath(t);this._listenersMap[r]=this._listenersMap[t]||[],this._listenersMap[r].push(e)}removeListener(t,e){if(!this._listenersMap)throw new Error(\"ListenersMap is undefined.\");if(!t)return;const r=this.adaptPagePath(t),n=this._listenersMap[r];if(n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}adaptPagePath(t){if(!t)return\"\";const e=s.a.internalize(t);if(!this.modelStore||!this.modelStore.rootPath)return e;return e===s.a.sanitize(this.modelStore.rootPath)?\"\":e}destroy(){delete this._fetchPromises,delete this._listenersMap,this._modelClient&&this._modelClient.destroy&&this._modelClient.destroy(),this._modelStore&&this._modelStore.destroy&&this._modelStore.destroy(),this._editorClient&&this._editorClient.destroy&&this._editorClient.destroy()}_storeData(t,e){let r=!1;return this._modelStore&&(r=s.a.isItem(t)),this.modelStore.insertData(t,e),this._notifyListeners(t),r||this._notifyListeners(\"\"),e}_toModelPath(t){let e=s.a.addSelector(t,\"model\");return e=s.a.addExtension(e,\"json\"),e=s.a.externalize(e),s.a.makeAbsolute(e)}_checkDependencies(){return this.modelClient?this.modelStore?Promise.resolve():Promise.reject(\"No ModelManager registered.\"):Promise.reject(\"No ModelClient registered.\")}}},function(t,e){},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];\".\"===i?t.splice(n,1):\"..\"===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift(\"..\");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e=\"\",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if(\"string\"!=typeof a)throw new TypeError(\"Arguments to path.resolve must be strings\");a&&(e=a+\"/\"+e,i=\"/\"===a.charAt(0))}return(i?\"/\":\"\")+(e=r(n(e.split(\"/\"),(function(t){return!!t})),!i).join(\"/\"))||\".\"},e.normalize=function(t){var o=e.isAbsolute(t),a=\"/\"===i(t,-1);return(t=r(n(t.split(\"/\"),(function(t){return!!t})),!o).join(\"/\"))||o||(t=\".\"),t&&a&&(t+=\"/\"),(o?\"/\":\"\")+t},e.isAbsolute=function(t){return\"/\"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if(\"string\"!=typeof t)throw new TypeError(\"Arguments to path.join must be strings\");return t})).join(\"/\"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&\"\"===t[e];e++);for(var r=t.length-1;r>=0&&\"\"===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split(\"/\")),o=n(r.split(\"/\")),a=Math.min(i.length,o.length),s=a,l=0;l<a;l++)if(i[l]!==o[l]){s=l;break}var c=[];for(l=s;l<i.length;l++)c.push(\"..\");return(c=c.concat(o.slice(s))).join(\"/\")},e.sep=\"/\",e.delimiter=\":\",e.dirname=function(t){if(\"string\"!=typeof t&&(t+=\"\"),0===t.length)return\".\";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?\"/\":\".\":r&&1===n?\"/\":t.slice(0,n)},e.basename=function(t,e){var r=function(t){\"string\"!=typeof t&&(t+=\"\");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?\"\":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){\"string\"!=typeof t&&(t+=\"\");for(var e=-1,r=0,n=-1,i=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===n&&(i=!1,n=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=a+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?\"\":t.slice(e,n)};var i=\"b\"===\"ab\".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(12))},function(t,e){t.exports=require(\"url\")},function(t,e,r){\"use strict\";r.r(e);r(11);var n=r(6);r.d(e,\"ModelManager\",(function(){return n.a}));var i=r(7);for(var o in i)[\"default\",\"ModelManager\",\"Constants\"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return i[t]}))}(o);var a=r(5);r.d(e,\"ModelClient\",(function(){return a.a}));var s=r(0);r.d(e,\"PathUtils\",(function(){return s.a}));var l=r(1);r.d(e,\"Constants\",(function(){return l.a}))},function(t,e,r){\"use strict\";var n=r(4),i=r(3),o=r(6),a=r(0);class s{constructor(){}}function l(t){const e=function(){const t=a.a.getMetaPropertyValue(i.a.PAGE_MODEL_ROUTE_FILTERS);return t?t.split(\",\"):[]}();for(let r=0,n=e.length;r<n;r++)if(new RegExp(e[r]).test(t))return!0;return!1}function c(){if(!a.a.isBrowser())return!1;const t=a.a.getMetaPropertyValue(i.a.PAGE_MODEL_ROUTER);return!t||s.DISABLED!==t}function h(t){if(!c())return;const e=function(t){const e=t||window.location.pathname;let r=e.indexOf(\".\");if(r<0){const t=e.indexOf(\"?\");r=t<0?e.length:t}return e.substr(0,r)}(t);e&&\"/\"!==e&&!l(e)&&function(t){o.a.getData({path:t}).then(t=>{a.a.dispatchGlobalCustomEvent(n.a.PAGE_MODEL_ROUTE_CHANGED,{detail:{model:t}})})}(e)}if(s.DISABLED=\"disabled\",s.CONTENT_PATH=\"path\",c()){const t=window.history.pushState,e=window.history.replaceState;window.history.pushState=(e,r,n)=>(h(n||null),t.apply(history,[e,r,n])),window.history.replaceState=(t,r,n)=>(h(n||null),e.apply(history,[t,r,n]))}},function(t,e){var r,n,i=t.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r=\"function\"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],h=!1,u=-1;function d(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&f())}function f(){if(!h){var t=s(d);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function _(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||h||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title=\"browser\",i.browser=!0,i.env={},i.argv=[],i.version=\"\",i.versions={},i.on=_,i.addListener=_,i.once=_,i.off=_,i.removeListener=_,i.removeAllListeners=_,i.emit=_,i.prependListener=_,i.prependOnceListener=_,i.listeners=function(t){return[]},i.binding=function(t){throw new Error(\"process.binding is not supported\")},i.cwd=function(){return\"/\"},i.chdir=function(t){throw new Error(\"process.chdir is not supported\")},i.umask=function(){return 0}}])}));"]},"metadata":{},"sourceType":"script"}